<div class="bg">
  <div class="parent">
    <div class="child">
      <div nz-col>
        <h1 style="margin-left: auto; margin-right: auto; text-align: center; width: fit-content;">New User</h1>
      </div>
      <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">

        <nz-form-item>
          <nz-form-control nzHasFeedback nzErrorTip="The input isn't a valid username">
            <input nz-input placeholder="Username" formControlName="username" id="username" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control nzHasFeedback nzErrorTip="The input isn't a valid password">
            <input nz-input type="password" placeholder="Password" formControlName="password" id="password" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control>
            <input nz-input type="password" placeholder="Confirm Password" formControlName="checkPassword" id="checkPassword" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control>
            <input nz-input placeholder="First Name" formControlName="firstname" id="firstname" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control>
            <input nz-input placeholder="Last Name" formControlName="lastname" id="lastname" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control>
            <input nz-input placeholder="Phone" formControlName="phone" id="phone" />
          </nz-form-control>
        </nz-form-item>

        <!-- File input for profile picture with custom button -->
        <nz-form-item>
          <nz-form-control>
            <label for="profilePicInput" style="font-weight: bold;">Profile Picture </label>

            <!-- Hidden native file input -->
            <input
              type="file"
              id="profilePicInput"
              (change)="onFileSelected($event)"
              style="display: none;"
              #fileInput />

            <!-- Custom button to trigger the file input -->
            <button nz-button (click)="fileInput.click()" type="button">
              upload file
            </button>

            <!-- Display the selected file name or 'No file chosen' under the button -->
            <small style="display: block; margin-top: 8px;">
              {{ selectedFile ? selectedFile.name : 'No picture chosen' }}
            </small>
          </nz-form-control>
        </nz-form-item>

        <!-- Display the selected profile picture -->
        <nz-form-item *ngIf="profilePicUrl">
          <nz-form-control>
            <img [src]="profilePicUrl" alt="Profile Picture Preview" width="100" height="100" />
          </nz-form-control>
        </nz-form-item>


        <button nz-button class="login-form-button login-form-margin" [nzType]="'primary'">
          Register
        </button>
        <br><br>
      </form>
    </div>
  </div>
</div>
